<!DOCTYPE html>
<html lang="en">

<head>
    {{ template "head.html" }}
</head>

<body class="min-h-screen bg-gray-50 p-4" data-page="day">
    <!-- Navbar -->
    {{template "nav.html" .}}

    <main class="w-full max-w-screen-lg mx-auto space-y-6 bg-white shadow rounded-xl p-6">
        <h1 class="text-2xl font-semibold text-center">Daily Data</h1>

        <!-- Controls -->
        <form class="space-y-4" id="chart-controls">

            <!-- Station -->
            <div class="grid grid-cols-3 gap-3 items-center">
                <label for="station" class="col-span-1 font-medium">Station</label>

                <select id="station" name="station" class="col-span-2 border rounded p-2 w-full">
                    {{$selected := .Query.station}}
                    {{range .Stations}}
                    <option value="{{.Abbr}}" {{if eq .Abbr $selected}}selected{{end}}>{{.Name}} {{.Canton}} ({{.Abbr}})
                    </option>
                    {{end}}
                </select>
            </div>


            <!-- Date picker -->
            <div class="grid grid-cols-3 gap-3 items-center">
                <label for="date" class="col-span-1 font-medium">Date</label>
                <div class="col-span-2 flex gap-3 items-center">
                    <button type="button" id="prev-date" class="border rounded px-3 py-2 text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                        </svg>
                    </button>
                    <input type="date" id="date" name="date" placeholder="Pick date" value="{{.Query.date}}"
                        class="border rounded p-2 w-full">

                    <button type="button" id="latest-date" class="border rounded px-3 py-2 text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth="1.5"
                            stroke="currentColor" class="size-6">
                            <path strokeLinecap="round" strokeLinejoin="round"
                                d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                        </svg>
                    </button>
                    <button type="button" id="next-date" class="border rounded px-3 py-2 text-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="size-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                        </svg>
                    </button>
                </div>
            </div>


        </form>

        <!-- Charts -->
        <div>
            <div class="mb-8">
                <div hx-ext="path-params" hx-trigger="change from:#chart-controls"
                    hx-get="/stations/{station}/charts/day/{date}/overview" hx-include="#chart-controls"
                    hx-target="this" hx-swap="innerHTML"
                    data-vega-target="overview-chart">
                    <!-- Vega script goes here -->
                </div>
                <div id="overview-chart" class="w-full overflow-hidden"></div>
            </div>
        </div>

        <!-- Measurements table -->
        <div>
            <div id="measurements-table-container" hx-ext="path-params" hx-include="#chart-controls" hx-swap="innerHTML"
                hx-target="this" hx-trigger="change from:#chart-controls"
                hx-get="/stations/{station}/stats/day/{date}/measurements">
                <!-- <table> with station weather summary goes here -->
            </div>
        </div>

    </main>

    {{template "disclaimer.html" .}}

    <script type="module" src='{{assetHash "/static/dist/main.js"}}'></script>

</body>

</html>